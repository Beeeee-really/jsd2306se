<center>

# Day01

</center>

## MySQL

### 登录与登出

- **登录远端服务器** mysql -u(用户名) -h(ip地址) -P(端口号) -p(密码)
- **登陆本地服务器** mysql -u(用户名) -p(密码)
- **登出** exit *(ctrl+c)*

## SQL

> 编程语言

- SQL是Structured Query Language的缩写，翻译成中文为结构化查询语言
- SQL是与数据库进行交互的一种标准，但是不同数据库会有基于SQL的一些不同实现

### SQL的用处

- 创建数据库中的对象
- 访问数据库中的对象
- 更新数据库中的数据

### SQL类型

> 不同类型的SQL语法不同
> <p></p>
> 基于业务选择不同的SQL进行应用

- 数据定义语言，用于操作数据库对象 [数据库，表，视图，索引，...\]

#### DDL:数据操纵语言,用于操作(添加，修改，删除，查询)表中数据

#### DQL:数据查询语言,用于查询数据库中的数据

#### TCL:TCL（Tool Command Language）是一种脚本编程语言，在数据库中通常被用于编写存储过程和触发器。TCL提供了一系列的命令和语法，可以用于控制程序流程、执行数据库操作以及处理数据

## 数据库基本操作

### 语法增强

#### 案例演示

<p>获取创建数据库的详细语法</p>

```mariadb
help 'create database';
# 或者:
# ? 'create database';
```

<p></p>


<p>创建数据库</p>

```mariadb
# create or replace database db1;
```

<p>查看有哪些字符集</p>

```mariadb
show character set like '%utf8%';
# 只要包含utf8
# 为前或后包含字符
# like模糊判断
```

<p></p>

![屏幕截图 2023-08-08 163658.png](屏幕截图%202023-08-08%20163658.png)

<p>注释</p>

```sql
COMMENT
'qwq';-- 注释
```

### 创建数据库

```mariadb
create database qwq character set = utf8;
#                  数据库的名字 编码方式
#     可小写
#     推荐大写
```

#### 案例演示

<p>创建一个名字为jsd2306的数据库</p>

```mariadb
create database jsd2306;
```

数据库无法重复创建

<p>因此</p>

![屏幕截图 2023-08-08 152410.png](屏幕截图%202023-08-08%20152410.png)

```mariadb
# 当数据库不存在时创建数据库
create database if not exists jsd2306 character set utf8mb4;
# 替换或创建数据库
create or replace database ntd;
```

<p></p>

![屏幕截图 2023-08-08 152608.png](屏幕截图%202023-08-08%20152608.png)

### 删除数据库

```mariadb
drop database if exists 数据库名字;
```

#### 案例演示

<p>删除名为jsd2306的数据库</p>

```mariadb
drop database if exists jsd2306;
```

### 查看数据库

#### 查看所有数据库

```mariadb
show databases;
```

### 使用数据库

<p>切换/打开</p>

````mariadb
use spl;
````

#### 案例演示

```mariadb
use jsd2306;
```

### 查看数据库中所有的表

```mariadb
show tables;
```

### 创建表

<p></p>

| 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |
|---|---|---|---|---|---|---|---|---|
| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 |
| 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 |
| 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 |

<p></p>

```mariadb
# create table jsd2306
# (
#字段名 字段类型 字段约束,字段名 字段类型 字段约束,字段名 字段类型 字段约束,字段名 字段类型 字段约束,字段名 字段类型 字段约束,...
# );编码与数据库一致
```

#### 案例演示

<p>创建一个表</p>

```mariadb
create table if not exists class
(# 不存在才创建
    id          int primary key comment '班级id',# 主键约束:此id的值必须是唯一的，并且不允许为空(null)
    name        varchar(50) comment '班级名称',# 50个字符 可变字符类型 允许字段为空(null)
    create_date date comment '班级创建日期'# date日期类型
#     primary key (id) 也可以设置主键
)
```

<p></p>

![屏幕截图 2023-08-08 174027.png](屏幕截图%202023-08-08%20174027.png)

### 删除表

```mariadb
# drop table class;# 表名
```

### alter

<p>添加字段</p>

```mariadb
alter table class
    add create_time date;
```

<p>更改字段名称</p>

```mariadb
alter table class
    change create_date create_time date;
```

<p>在某字段之后</p>

```mariadb
alter table class
    add create_time date after create_date;
# 在create_date后创建新的字段
```

### 重命名表格

```mariadb
rename table class to class;
```

<center>

# Day02

</center>

## 表中数据的操作

### 查询

- 简单语法

```mariadb
# 指定数据
select update_time, create_date
from class;

# 所有数据
select *
from class;
```

### 添加数据

- 语法

```mariadb
insert into class (id, create_date, create_time, update_time)
VALUES (1, '1111 - 01 - 01', '1111 - 03 - 05', '1111 - 12 - 05');
```

### 更新表中记录

```mariadb
update class
set create_date='1111-11-11'
where id = 1;
```

### 清空表中记录

```mariadb
delete
from class
where id = 2;


truncate class;# 危 清空表中数据 数据不能恢复 不记录日志
```

## 表中字段的类型与约束

> 字段类型决定了字段值的取值范围
<p>

**常见的类型**

</p>

### 数值型

#### 整型

> 整型(tinyint[1],smallint[2],mediumint[3],int[4],bigint[8])

```mariadb

```

#### 浮点型

> 浮点型(float[4],double[8],decimal[8]精确运算)

### 字符型

#### 定长字符(char)

> 定义的字段为char(3) 不管是几个字符，长度始终是3 不够自动用空格填充

#### 变长字符varchar(n) 这里的n表示字节数，占用的字节数与实际占用的字符个数无关

> 长度可变

#### 文本类型tinytext(n),text,mediumtext,longtext

> <p>1) tinytext(n) 这里的n表示字符数，取值范围为255个字符</p>
> <p>2) text(n) 这里的n表示字符数，取值范围为0~65535个字符</p>
> <p>3) </p>

### 约束类型

#### 主键约束

> primary key(主键字段) 字段值必须唯一，且不能为空

#### 非空约束

> not none 字段值不能为空 字段值允许为null

#### 唯一约束

> unique 字段值必须唯一，可以为null

#### 默认值约束

> default 为字段设置默认值，假如字段没有赋值，则使用默认值

#### 外键约束

> foreign key 表之间建立关系时，使用的约束字段值

#### 检查约束

> check 字段应在指定范围内

### 约束案例应用

```mariadb
drop database if exists Bee;
create database if not exists Bee;
use Bee;
create table student
(
    id          int,
    foreign key (id) references student (id),
    name        varchar(50)        not null,
    age         int                not null check ( age > 0 | age < 150 ),
    gender      enum ('male','female') default 'male',
    phone       varchar(11) unique not null,
    birthday    date               not null,
    email       varchar(100)       not null unique,
    create_time datetime               default current_timestamp,
    update_time datetime               default current_timestamp
);
insert into student
values (1, 'qwq', 149, 'female', '11111111111', '1111-11-11', 'email@example.com', null, null);
select *
from student;
```

<center>

# Day03

</center>

### 创建关系表

```mariadb
create table tb_student_subject
(
    student_id int,
    subject_id int,
#     foreign key (student_id) references tb_student (id),
#     foreign key (student_id) references tb_subject (id),
#     primary key (student_id, subject_id)
    primary key (id)
#     有两个字段构成的主键
);
alter table tb_student_subject
    add foreign key (student_id) references tb_student (id);
alter table tb_student_subject
    add foreign key (student_id) references tb_subject (id);
```

> student_id,subject_id
> <p>1         1</p>
> <p>2         1</p>
> <p>1         2</p>
> <p>1         1</p>
> <p>2         2</p>

### 查hr数据库中员工信息

#### 查询雇员表中名字包含a字母的雇员名和佣金(提成)？

```mariadb
select first_name, commission_pct
from employees
where first_name like '%a%'; 
```

#### 查询薪水在10000与24000之间的员工姓名、薪水...

```mariadb
 select first_name, salary, hire_date
 from employees
 where salary between 10000 and 24000;
```

### 对查询结果进行排序

- 语法结构

order by {}

- 案例演示

查询部门90中雇员的名字和薪水，降序

```mariadb
select first_name, salary
from employees
where department_id = 90
order by 2 desc -- 2表示第2列
```

<center>

# Day04

</center>

## DQL中分页查询

> Limit语句
>
> <p>DQL中的函数查询(单行函数,多行函数)</p>
> <p>DQL中的分组查询(Group By,Having语法)</p>
> <p>DQL中的嵌套查询(外层查询中嵌套内层查询)</p>
> <p>DQL中的多表关联查询(join...on...)</p>
> <p>DQL中的排序查询(order by)</p>
> <p>DQL中的条件查询(where)</p>
> <p>DQL中的简单查询(select)</p>

### 分页查询

- 查询语句的语法

```sql
limit
[offset],pageSize
```

<p>

**offset表示从什么位置去查询**

</p>
<p>

**pageSize页面的大小**

</p>

- limit在sql中的位置

```sql
select
from
    [表A join 表B
on 连接条件 1]
    [
where 查询条件]
    [
group by 分组查询]
    [
having 对分组后的结果进行限制返回]
    [
order by 字段名 ASC | DESC]
    [limit [
offset],pagesize]
```

- 案例演示

> 1. 查新前3条雇员的信息

```mariadb
use hr;
select employee_id, first_name, salary
from employees
limit 0,3;
```

![屏幕截图 2023-08-11 092531.png](屏幕截图%202023-08-11%20092531.png)


> 2. 从雇员表中查询数据，每页最多查询10条记录

```mariadb
use hr;
select employee_id, first_name, salary
from employees
limit 10,10;
```

limit子句底层执行原理，是先取出offset+10条记录，然后再将offset前面的记录扔掉

- 语法1（常用）

sqlimit [offset],pageSize;

1. offset表示从什么位置去查询数据
2. pageSize表示要查询的数据量.

- 语法2(不常用)

......

```mariadb
select count(case when salary >= 10000 then 1 else null end) '>-10000',
       count(case when salary >= 8000 then 1 else null end)  '>=8000'
from employees;
```

```mariadb
use hr;
select max(salary), min(salary), sum(salary)
from employees
group by employee_id;
```

- 查询雇员206的薪资所在范围

```mariadb
use hr;
select employee_id, job_title, min_salary, max_salary
from employees e
         join jobs j on e.job_id = j.job_id
where e.employee_id = 206;
```

```mariadb
use hr;
select department_id, sum(salary)
from employees
group by department_id
having sum(salary) > 500000;
```

```mariadb
use hr;
select first_name, start_date, end_date
from employees e
         join job_history j on e.employee_id = j.employee_id;
```

<center>

# Day05

</center>

### 嵌套查询

> 当一个查询依赖于另一个查询的结果时，此时可以使用嵌套查询(外层查询中有内置了子查询)

#### 应用子句

1) select
2) from
3) where
4) ...

#### 案例演示

- 取经理人雇员编号为206的名字和薪水

```mariadb
use hr;
select first_name, salary
from employees
where employee_id = (select manager_id
                     from employees
                     where employee_id = 206);
```

- 查询每个部门中，薪资最高的那个人的名字和薪水

```mariadb
use hr; 
select e1.department_id, e2.first_name, e2.salary
from (select department_id, max(salary) 
      from employeesl
      group by department_id) e1
         join employees e2
              on e1.department_id = e2.department_id
where e1.max_salary = e2.salary
``` 


```mariadb
use hr;
select first_name, salary
from employees
where salary < any -- any表示任何一个 
      (select salary
       from employees
       where job_id = 'IT_PROG')
```
    


































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    




























































































